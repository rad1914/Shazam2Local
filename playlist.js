// @path: playlist.js
import{exec}from'./exec.js';import{z,e,i,n,k}from'./utils/utils.js';import{p}from'./downloader.js';export const c=async(u,r)=>{i('Fetching playlist...');try{const{stdout}=await exec(`yt-dlp --flat-playlist --print-json "${u}"`),a=stdout.trim().split('\n').map(l=>{try{const d=JSON.parse(l);return{id:d.id,title:z(d.title||d.id),u}}catch{return null}}).filter(Boolean),b=[...new Map(a.map(x=>[x.id,x])).values()];return p(b,r,x=>({id:x.id,title:x.title,query:`https://youtu.be/${x.id}`,finalName:x.title,checkKeys:k(x,'playlist'),extraMeta:{playlist:x.u}}),'Playlist')}catch(t){e(`Playlist fetch failed: ${t.message}`);return n()}};
